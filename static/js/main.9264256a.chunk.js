(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,a){e.exports=a.p+"static/media/logo-trans.c7ee7bd9.png"},133:function(e,t,a){},146:function(e,t,a){},148:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),s=a(23),r=a.n(s),c=(a(79),a(6)),l=a(7),i=a(13),m=a(12),u=a(14),d=a(35),b=a(36),h=a(37),g=a.n(h),p={apiKey:"AIzaSyCSmaCRXRCakWz3Bp2ffvbbDAITtco1iDQ",authDomain:"autocommit-7b216.firebaseapp.com",databaseURL:"https://autocommit-7b216.firebaseio.com",projectId:"autocommit-7b216",storageBucket:"autocommit-7b216.appspot.com",messagingSenderId:"71888027585"};a(127),a(129);var f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};Object(c.a)(this,e),this.firebase=g.a,this.firebase.initializeApp(p),this.firebase.auth().onAuthStateChanged(function(e){t(e)}),this.user=null}return Object(l.a)(e,[{key:"login",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=new g.a.auth.GithubAuthProvider;n.addScope("repo"),g.a.auth().signInWithPopup(n).then(function(a){console.log("User successfully logged in."),e.user=a.user,t(a)}).catch(function(e){console.error("Sign in error",e),a()})}},{key:"logout",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};this.firebase.auth().signOut().then(function(){console.log("User logged out"),e.user=null,t()}).catch(function(e){console.error("Sign out error",e),a()})}},{key:"changeUserDisplayName",value:function(e){var t=this.firebase.auth().currentUser;return new Promise(function(a,n){t.updateProfile({displayName:e}).then(function(){console.log("Display name successfully changed"),a(t)},function(e){console.error("Error changing display name",e)})})}},{key:"addUserToDB",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};this.firebase.database().ref("users").update(Object(d.a)({},e,Object(b.a)({},t,{autocommits:!1}))).then(function(){console.log("DB ".concat(e," successfully added to database")),a()}).catch(function(t){console.error("DB error adding ".concat(e," to database")),n(t)})}},{key:"getUserFromDB",value:function(e){var t=this.firebase.database().ref("users/".concat(e));return new Promise(function(a,n){t.once("value",function(t){console.log("Found ".concat(e)),a(t.val())})})}},{key:"assignKeyToUser",value:function(e,t,a){var n=this,o=this.firebase.database().ref("users/".concat(e));return new Promise(function(s,r){o.update({keyName:t,keyValue:a}).then(function(){console.log("Key for ".concat(e," was successfully assigned")),n.getUserFromDB(e).then(function(e){s(e)})}).catch(function(t){console.error("Error assigning key for ".concat(e)),r(t)})})}},{key:"toggleCommits",value:function(e,t){var a=this.firebase.database().ref("users/".concat(e));return new Promise(function(n,o){a.update({autocommits:t}).then(function(){console.log("Autocommits for ".concat(e," was set to ").concat(t)),n()}).catch(function(a){console.error("Error setting ".concat(e," autocommits to ").concat(t)),o(a)})})}},{key:"getUnusedKey",value:function(){var e=this.firebase.database().ref("keys");return new Promise(function(t,a){e.limitToLast(1).once("value",function(e){t(e.val())})})}},{key:"removeUnusedKey",value:function(e){var t=this.firebase.database().ref("keys");return new Promise(function(a,n){t.child(e).remove(function(){console.log("Key was successfully removed"),a("Removed")})})}}]),e}(),y=(a(133),a(53)),E=a.n(y),v=a(11),k=a.n(v),w=[{img:k.a,title:"Create 'autocommit' repo",desc:o.a.createElement("span",null,o.a.createElement("a",{href:"https://github.com/new",target:"blank"},"Create a new GitHub repo")," named 'autocommit', that will be used to make auto commits.")},{img:a(11),title:"Generate your SSH key",desc:"After Sign Up in Autocommits, our server will generate you a unique SSH key which is needed to identify our server when it will makes commits for you."},{img:a(11),title:"Connect key to GitHub",desc:"Then you will need to connect this key to your GitHub account in order to make GitHub aware that server represents you."},{img:a(11),title:"Enable Autocommits",desc:"And the last stap will be simple. Just press a button 'Enable' in our Dashboard to enable automatic daily contributions."}],N=[{q:"How do Autocommits works?",a:o.a.createElement("span",null,"Our server is scheduled to run once/day and get from database info about which account has enabled autocommits, then it performs couple of commits directly to 'autocommit' repo.")},{q:"I'm connecting generated key to my GitHub account, how can I know that it will be used only for autocommits?",a:o.a.createElement("span",null,"Connecting SSH key to your account means that owner of the key (server) can perform any actions from your name in GitHub, it's true. But, we are an open-source project, ",o.a.createElement("a",{href:"https://github.com/kirillovmr/autocommit",target:"blank"},"here is our GitHub page"),", only our server and you knows your unique key. ")},{q:"What if I want to stop using Autocommits?",a:o.a.createElement("span",null,"You can stop using Autocommits anytime by deactivating your account in Autocommits Dashboard. Also, you can ",o.a.createElement("a",{href:"https://github.com/settings/keys",target:"blank"},"delete given SSH key from your account")," anytime you want.")}],x=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"renderSteps",value:function(){return w.map(function(e){return o.a.createElement("div",{className:"media pt-3",key:E()()},o.a.createElement("img",{src:e.img,width:"32",height:"32",className:"bd-placeholder-img mr-2 rounded",alt:""}),o.a.createElement("p",{className:"media-body pb-0 mb-0 small lh-125 border-bottom border-gray pb-2"},o.a.createElement("strong",{className:"text-gray-dark"},e.title),o.a.createElement("span",{className:"d-block"},e.desc)))})}},{key:"renderFaq",value:function(){return N.map(function(e){return o.a.createElement("div",{className:"media text-light",key:E()()},o.a.createElement("p",{className:"media-body pb-0 mb-0 small lh-125 border-bottom border-gray py-3"},o.a.createElement("strong",{className:"text-gray-dark"},e.q),o.a.createElement("span",{className:"d-block ml-3 mt-1"},e.a)))})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("header",null,o.a.createElement("nav",{className:"navbar navbar-dark bg-dark"},o.a.createElement("div",{className:"container d-flex justify-content-between"},o.a.createElement("span",{className:"navbar-brand text-light"},o.a.createElement("img",{src:k.a,width:"30",height:"30",className:"d-inline-block align-top mr-2",alt:""}),"Auto Commit"),o.a.createElement("button",{type:"button",onClick:this.props.login,className:"btn btn-outline-light"},o.a.createElement("i",{className:"fab fa-github mr-1"})," Login")))),o.a.createElement("div",{className:"d-flex flex-column justify-content-between",style:{height:"calc(100vh - 56px)"}},o.a.createElement("main",{role:"main",className:"container mb-5"},o.a.createElement("div",{className:"card my-3 rounded shadow"},o.a.createElement("img",{src:"https://picsum.photos/600/150/?blur",className:"card-img-top",alt:"..."}),o.a.createElement("div",{className:"card-body text-center"},o.a.createElement("h5",{className:"card-title"},o.a.createElement("span",{role:"img","aria-label":"emoji"},"\ud83d\udc4b")," Welcome to the automation"),o.a.createElement("p",{className:"card-text"},"This service is used to make automatic contributions on GitHub once a day to keep up your activity!"),o.a.createElement("p",{className:"card-text text-muted"},o.a.createElement("em",null,'"Simple to enable, free to use, happy to see. Your everyday activity."')),o.a.createElement("p",{className:"card-text"},o.a.createElement("small",{className:"text-muted"},o.a.createElement("em",null,"Best, Autocommit Team \xa9 2019"))))),o.a.createElement("div",{className:"d-flex align-items-center p-3 my-3 text-light bg-grey rounded shadow"},o.a.createElement("div",{className:"lh-100 w100"},o.a.createElement("button",{type:"button",onClick:this.props.login,className:"btn btn-block btn-outline-light"},o.a.createElement("i",{className:"fab fa-github mr-1"})," Login and Try In Now"))),o.a.createElement("div",{className:"my-3 p-3 bg-white rounded shadow"},o.a.createElement("h6",{className:"border-bottom border-gray pb-2 mb-0 d-flex justify-content-between w-100"},o.a.createElement("span",null,o.a.createElement("span",{role:"img","aria-label":"emoji"},"\ud83e\udd14")," How this magic works?"),o.a.createElement("i",{className:"fas fa-magic"})),o.a.createElement("span",{className:"mt-2 ml-3 d-block text-muted"},"Now you will see how it works. To enable Autocommits for your account, we will need some setup steps from you."),this.renderSteps()),o.a.createElement("div",{className:"my-3 p-3 bg-dark text-light rounded shadow"},o.a.createElement("h6",{className:"border-bottom border-gray pb-2 mb-0 d-flex justify-content-between w-100"},o.a.createElement("span",null,o.a.createElement("span",{role:"img","aria-label":"emoji"},"\ud83d\ude4b\u200d\u2642\ufe0f")," FAQ"),o.a.createElement("i",{className:"fas fa-question"})),this.renderFaq())),o.a.createElement("footer",{className:"footer bg-dark mt-auto py-3 shadow-lg"},o.a.createElement("div",{className:"container text-center"},o.a.createElement("span",{className:"text-light"},o.a.createElement("a",{href:"https://github.com/kirillovmr",target:"blank"},"@kirillovmr")," | ",o.a.createElement("span",{className:"text-link",onClick:function(){return e.props.changePage("docs")}},"Docs"))))))}}]),t}(n.Component),S=a(152),j=a(150),U=a(151);function C(){return o.a.createElement("div",{className:"d-flex justify-content-center w-100"},o.a.createElement("div",{className:"spinner-border",role:"status"},o.a.createElement("span",{className:"sr-only"},"Loading...")))}var D=a(70),O=a.n(D),A=a(71),P=a.n(A),H=a(72),G=a.n(H),T=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={dbUser:{autocommits:!1},buttonSpinner:!1,modal:!1},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log("\ud83d\udc4d Did Mount run");var t=this.props.user.displayName;this.props.db.getUserFromDB(t).then(function(t){if(console.log("\ud83d\udce1 dbUser got",t),!t)return e.componentDidMount();e.setState({dbUser:t})})}},{key:"generateKey",value:function(){var e=this;this.setState({buttonSpinner:!0}),this.props.db.getUnusedKey().then(function(t){var a=Object.keys(t)[0],n=t[a];console.log(a,n);var o=e.props.user.displayName;e.props.db.assignKeyToUser(o,a,n).then(function(t){e.props.db.removeUnusedKey(a).then(function(){e.setState({dbUser:t,buttonSpinner:!1})})})})}},{key:"toggleCommits",value:function(e){var t=this,a=this.props.user.displayName;this.props.db.toggleCommits(a,e).then(function(){t.setState({dbUser:Object(b.a)({},t.state.dbUser,{autocommits:e})})})}},{key:"toggleModal",value:function(){this.setState({modal:!this.state.modal})}},{key:"renderModal",value:function(){var e=this;return o.a.createElement(S.a,{isOpen:this.state.modal,toggle:this.toggleModal.bind(this),className:this.props.className},o.a.createElement(j.a,{toggle:this.toggleModal.bind(this)},"Your public SSH key"),o.a.createElement(U.a,null,o.a.createElement("p",null,"This is your unique public SSH key. It is used to identify our server as you when it will make auto commits. ",o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("a",{href:"https://github.com/settings/ssh/new",target:"blank"},"Connect this key to your GitHub account")," and then you can enable Autocommits."),o.a.createElement("div",{className:"p-4 bg-grey text-white"},o.a.createElement("code",null,o.a.createElement("small",null,this.state.dbUser.keyValue,o.a.createElement("button",{type:"button",class:"btn btn-outline-secondary btn-sm btn-block mt-2"},"Copy to clipboard")))),o.a.createElement("p",{className:"mt-2 mb-0 text-center"},o.a.createElement("small",null,"Make sure to enable autocommits only after you connected SSH key!")),o.a.createElement("button",{type:"button",onClick:function(){e.toggleCommits(!0),e.toggleModal()},class:"btn btn-success btn-sm btn-block mt-1"},"Enable Autocommits")))}},{key:"renderStatusBlock",value:function(){var e=this;return this.state.dbUser.email?o.a.createElement("div",{className:"text-center w-100 mb-2"},o.a.createElement("img",{className:"mb-1",src:e.state.dbUser.autocommits?O.a:e.state.dbUser.keyName?P.a:G.a,alt:"",width:"130",height:"130"}),o.a.createElement("h1",{className:"h3 mb-3 font-weight-normal"},e.state.dbUser.autocommits?"You are enabled \ud83d\ude0e":e.state.dbUser.keyName?"Auto commits disabled \ud83d\ude1e":"Generate your key"),e.state.dbUser.autocommits?o.a.createElement("p",null,"Your automatic commits are successfully scheduled and will automatically run each day ",o.a.createElement("code",null,"n")," times You can disable them any time with button below"):e.state.dbUser.keyName?o.a.createElement("p",null,"You account is currently disabled from Autocommit system. ",o.a.createElement("br",null),"To schedule on your autocommits press ",o.a.createElement("strong",null,"Enable Autocommits")," button below. ",o.a.createElement("br",null),"Make sure that you added given SSH-key to ",o.a.createElement("a",{href:"https://github.com/settings/ssh/new",target:"blank"},"your GitHUb Account")):o.a.createElement("p",null,"To ensure GitHub that it is your contributions, we will now assign you a unique SSH key which you will need to ",o.a.createElement("a",{href:"https://github.com/settings/ssh/new",target:"blank"},"add to your GitHub account"),". Press ",o.a.createElement("strong",null,"Generate Key")," and follow further instructions."),e.state.dbUser.autocommits?o.a.createElement("span",null,o.a.createElement("button",{className:"btn btn-danger",type:"button",onClick:function(){return e.toggleCommits(!1)}},"Disable Autocommits")):e.state.dbUser.keyName?o.a.createElement("span",null,o.a.createElement("button",{className:"btn btn-success",type:"button",onClick:e.toggleModal.bind(e)},"Enable Autocommits")):o.a.createElement("button",{className:"btn btn-primary",type:"button",disabled:!!e.state.buttonSpinner,onClick:function(){return e.generateKey()}},e.state.buttonSpinner?o.a.createElement("span",{className:"spinner-border spinner-border-sm mr-2",role:"status","aria-hidden":"true"}):null,e.state.buttonSpinner?"Generating key...":"Generate Key")):o.a.createElement(C,null)}},{key:"render",value:function(){var e=this;return console.log("fef",this.state),o.a.createElement("div",null,this.renderModal(),o.a.createElement("header",null,o.a.createElement("nav",{className:"navbar navbar-dark bg-dark"},o.a.createElement("div",{className:"container d-flex justify-content-between"},o.a.createElement("span",{className:"navbar-brand text-white"},o.a.createElement("img",{src:k.a,width:"30",height:"30",className:"d-inline-block align-top mr-2",alt:""}),"Auto Commit"),o.a.createElement("img",{src:this.props.user.photoURL,width:"30",height:"30",className:"d-inline-block ml-2 user-avatar-sm",alt:""})))),o.a.createElement("div",{className:"d-flex flex-column justify-content-between",style:{height:"calc(100vh - 56px)"}},o.a.createElement("main",{role:"main",className:"container"},o.a.createElement("div",{className:"d-flex align-items-center p-3 my-3 text-white bg-grey rounded shadow"},o.a.createElement("img",{className:"mr-3",src:k.a,alt:"",width:"48",height:"48"}),o.a.createElement("div",{className:"lh-100 w100"},o.a.createElement("h6",{className:"mb-0 lh-100 d-flex justify-content-between w-100"},o.a.createElement("span",null,"GitHub autocommit"),o.a.createElement("i",{className:"fas fa-magic"})," "),o.a.createElement("small",null,"This service is used to automatically make contributions on GitHub and keep up your activity."))),o.a.createElement("div",{className:"my-3 p-3 bg-white rounded shadow"},o.a.createElement("h6",{className:"border-bottom border-gray pb-2 mb-0 d-flex justify-content-between w-100"},o.a.createElement("span",null,o.a.createElement("i",{className:"fab fa-github mr-1"})," Connected account"),o.a.createElement("i",{className:"fas fa-user"})),o.a.createElement("div",{className:"media text-muted pt-3"},o.a.createElement("img",{src:this.props.user.photoURL,width:"32",height:"32",className:"bd-placeholder-img mr-2 rounded",alt:""}),o.a.createElement("p",{className:"media-body pb-0 mb-0 small lh-125"},o.a.createElement("span",{className:"d-flex justify-content-between align-items-center w-100"},o.a.createElement("strong",{className:"text-gray-dark"},"@",this.props.user.displayName),o.a.createElement("span",{className:"text-danger text-link",onClick:function(){return e.props.logout()}},"Logout")),this.props.user.email))),o.a.createElement("div",{className:"my-3 p-3 bg-white rounded shadow"},o.a.createElement("h6",{className:"border-bottom border-gray pb-2 mb-0 d-flex justify-content-between w-100"},o.a.createElement("span",null,o.a.createElement("i",{className:"fas fa-cubes mr-1"})," Auto commit status"),o.a.createElement("span",{className:"badge badge-".concat(this.state.dbUser.autocommits?"success":"danger")},this.state.dbUser.autocommits?"Enabled":"Disabled")),o.a.createElement("div",{className:"media text-muted pt-3"},this.renderStatusBlock())),o.a.createElement("div",{className:"my-3 p-3 bg-white rounded shadow"},o.a.createElement("h6",{className:"border-bottom border-gray pb-2 mb-0 d-flex justify-content-between w-100"},o.a.createElement("span",null,o.a.createElement("i",{className:"fas fa-server mr-1"})," Countdown to next commit")),o.a.createElement("div",{className:"progress mt-3"},o.a.createElement("div",{className:"progress-bar progress-bar-striped bg-success progress-bar-animated",role:"progressbar",style:{width:"25%"},"aria-valuenow":"25","aria-valuemin":"0","aria-valuemax":"100"})))),o.a.createElement("footer",{className:"footer mt-auto py-3 shadow-lg"},o.a.createElement("div",{className:"container text-center"},o.a.createElement("span",{className:"text-muted"},o.a.createElement("a",{href:"https://github.com/kirillovmr",target:"blank"},"@kirillovmr")," | ",o.a.createElement("span",{className:"text-link",onClick:function(){return e.props.changePage("docs")}},"Docs"))))))}}]),t}(n.Component);a(146);function B(){return o.a.createElement("div",{className:"text-center"},o.a.createElement("div",{className:"loading-spinner"}))}var I=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h1",null,"Docs page"),o.a.createElement("p",null,"Docs"))}}]),t}(n.Component),K=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).db=new f(function(e){e?a.setState({initialFetchDone:!0,userProfile:e}):a.setState({initialFetchDone:!0})}),a.state={initialFetchDone:!1,timerDone:!1,userProfile:null,page:null},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.setState({timerDone:!0})},600)}},{key:"onSignInSuccess",value:function(e){var t=this,a=e.additionalUserInfo.username;this.db.changeUserDisplayName(a).then(function(n){var o={email:n.email,accessToken:e.credential.accessToken,photoUrl:n.photoURL};t.db.addUserToDB(a,o),t.setState({userProfile:n})})}},{key:"onLogOut",value:function(){this.setState({userProfile:null})}},{key:"chandePage",value:function(e){switch(e){case"docs":return void this.setState({page:e});default:return}}},{key:"returnPage",value:function(e){switch(e){case"docs":return o.a.createElement(I,null);default:return null}}},{key:"renderPage",value:function(){var e=this;return this.state.page?this.returnPage(this.state.page):this.state.timerDone?this.state.userProfile?o.a.createElement(T,{logout:function(){return e.db.logout(function(){return e.onLogOut()})},user:this.state.userProfile,changePage:this.chandePage.bind(this),db:this.db}):o.a.createElement(x,{login:function(){return e.db.login(function(t){return e.onSignInSuccess(t)})},changePage:this.chandePage.bind(this)}):o.a.createElement(B,null)}},{key:"render",value:function(){return o.a.createElement("div",{className:"App"},this.renderPage())}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(K,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},70:function(e,t,a){e.exports=a.p+"static/media/steroidtocat.15414bd9.png"},71:function(e,t,a){e.exports=a.p+"static/media/orderedlistocat.c9b87b0e.png"},72:function(e,t,a){e.exports=a.p+"static/media/deckfailcat.c99b2b43.png"},74:function(e,t,a){e.exports=a(148)},79:function(e,t,a){}},[[74,2,1]]]);
//# sourceMappingURL=main.9264256a.chunk.js.map